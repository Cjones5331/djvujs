<!DOCTYPE html><html><head><meta charset="utf-8"/><!-- Yandex.Metrika counter -->
<script type="text/javascript" >
    (function (d, w, c) {
        (w[c] = w[c] || []).push(function() {
            try {
                w.yaCounter47737162 = new Ya.Metrika({
                    id:47737162,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true
                });
            } catch(e) { }
        });

        var n = d.getElementsByTagName("script")[0],
            s = d.createElement("script"),
            f = function () { n.parentNode.insertBefore(s, n); };
        s.type = "text/javascript";
        s.async = true;
        s.src = "https://mc.yandex.ru/metrika/watch.js";

        if (w.opera == "[object Opera]") {
            d.addEventListener("DOMContentLoaded", f, false);
        } else { f(); }
    })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/47737162" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter --><link rel="stylesheet" href="/css/main.css?v=1"/><link rel="shortcut icon" href="/img/djvu.png"/><link rel="stylesheet" href="/assets/prism.css"/><script src="/js/script.js" defer="defer"></script><script src="/assets/prism.js"></script><title>DjVu.js - Open and view DjVu online!</title></head><body><header> <div class="lang_block"> <a href="/ru"> <img src="/img/ru.png" width="32"/><span>Русский</span></a><a href="/"> <img src="/img/en.png" width="32"/><span>English</span></a></div><a href="./"><div class="site_name">DjVu.js program library</div></a></header><nav><a href="./">Viewer</a><a href="docs">Docs</a><a href="downloads">Downloads</a><a href="about">About</a><a href="extension">Extension</a></nav><div class="main"> <h1>Downloads</h1>

Here you can download the library and the viewer .js and .css files.

<p><a href="/assets/dist/djvu.js" download="djvu.js">Download DjVu.js library (version 0.5.0)</a></p>

<p></p><a href="/assets/dist/djvu_viewer.js" download="djvu_viewer.js">Download DjVu.js Viewer .js file (version 0.5.2)</a>

<p>Note that since the version 0.5.0 all viewer's CSS is inside the js file. So no separate djvu_viewer.css is provided.</p>

<p>You can download <em>the previous versions</em> <a href="https://github.com/RussCoder/djvujs/releases">here</a>.</p>

<h2>How to use it</h2><p>Create a folder with files that you downloaded from here (<code>djvu.js</code>, <code>djvu_viewer.js</code>). Then in the same folder create an .html file (let&#39;s say <code>index.html</code>) with the following content.</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;

&lt;header&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;script src=&quot;djvu.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;djvu_viewer.js&quot;&gt;&lt;/script&gt;

    &lt;style&gt;
        #for_viewer {
            height: 80vh;
            width: 90vw;
            margin: 5vh auto;
            border: 1px solid black;
        }
    &lt;/style&gt;

    &lt;script&gt;
        window.onload = function() {
            // save as a global value
            window.ViewerInstance = new DjVu.Viewer();
            // render into the element
            window.ViewerInstance.render(
                document.querySelector(&quot;#for_viewer&quot;)
            );
        };
    &lt;/script&gt;

&lt;/header&gt;

&lt;body&gt;
    &lt;div id=&quot;for_viewer&quot;&gt;&lt;/div&gt;
&lt;/body&gt;

&lt;/html&gt;
</code></pre>
<p>If you use Mozilla Firefox web browser, then you can just open the <code>index.html</code> and you will see the DjVu.js viewer, which will work absolutely the same way
as it does on the main page of this website. But if you use Google Chrome or Opera, you won&#39;t see anything except for some errors in the console. It&#39;s concerned with that the 
DjVu.js uses the Web Workers API of the web browsers and Chrome doesn&#39;t allow the script to create a Worker, when the file is loaded from the file system directly. In other words, you just need
to start a local web server in order to make everything work as it works on the Internet. Any static web server will do. </p>
<p>For example, if you have Node.js installed, you can just use the <code>serve</code> package to run a simple static web server. Run the following commands in your shell. </p>
<pre><code>npm install -g serve</code></pre><p>to install the <code>serve</code> package globally and then head to the directory, where our files are kept, and run</p>
<pre><code>serve -p 5000</code></pre><p>in order to start the local server (you may change the port as you wish). Then just open <a href="http://localhost:5000/">http://localhost:5000/</a> and you will see the viewer.</p>
<h2>Programmatic API</h2><p>Furthermore, the viewer has an API, which allows to open djvu files programmatically:</p>
<ul>
<li><code>loadDocument(buffer, name = &quot;***&quot;, config = null)</code> - accepts the <code>ArrayBuffer</code> and a name of a document which should be shown at footer (it&#39;s optional).</li>
<li><code>async loadDocumentByUrl(url, config = null)</code> - loads the documents as an <code>ArrayBuffer</code> and then invokes the previous method.</li>
<li><code>configure(config)</code> - just sets the options. Note, that when a document is loaded some option are reset to the initial ones, so you have to call the method again or use the last parameter of the two previous methods.</li>
<li><code>getPageNumber()</code> - returns the current page number.</li>
<li><code>on(eventName, handler)</code> - to add an event handler.</li>
<li><code>off(eventName)</code> - to remove an event handler.</li>
</ul>
<p>The <code>config</code> is an object containing options for the viewer. It&#39;s an optional parameter. It has the following shape:</p>
<pre><code class="language-js">// any of the parameters may be omitted, use only those you need
{
    pageNumber: 10,
    pageRotation: 90,
    pageScale: 2,
    language: &#39;ru&#39;,
    theme: &#39;dark&#39;,
    djvuOptions: {
        baseUrl: &quot;/url/to/directory/with/indirect/djvu/&quot;
    }
}
</code></pre>
<ul>
<li><code>pageNumber</code> - the number of a currently opened page. Greater than or equal to 1. If it&#39;s less than 1, 1 will be used, if it&#39;s greater than the 
total number of pages in a document, then the last page number will be used.</li>
<li><code>pageRotation</code> - the rotation of a page, it can be 0, 90, 180, 270.</li>
<li><code>pageScale</code> - the scale of a page, it is a number from 0.1 to 6 (~ 10% to 600%). Numbers less/greater than the limits are replaced by the limits themselves, to wit, 8 will be treated as 6, and 0.001 as 0.1, 0 will be ignored at all and the default scale value (which is 1) will be used.  </li>
<li><code>language</code> - 2-character language code like <code>ru</code>, <code>en</code>, <code>sv</code> etc.
Use <code>DjVu.Viewer.getAvailableLanguages()</code>to get the full list of languages which can be used.
Note, you also can <a href="https://github.com/RussCoder/djvujs/blob/master/TRANSLATION.md">add your own language</a>.</li>
<li><code>theme</code> - the color theme. Either <code>light</code> or <code>dark</code>. By default the browser&#39;s color scheme is used (or the value save in the local storage).</li>
<li><code>djvuOptions</code> - an object which is passed to the library. Now there is only one option - the base url, which is the url to the directory containing the files of an indirect djvu. For bundled djvu this parameter is not required. The base url is extracted automatically from a url to the index.djvu, when the <code>loadDocumentByUrl</code> is called, but in case of <code>loadDocument</code> method, this parameter should be provided manually.</li>
</ul>
<p>There are several static methods and properties:</p>
<ul>
<li><code>DjVu.Viewer.VERSION</code> - the current version of the viewer.</li>
<li><code>DjVu.Viewer.getAvailableLanguages()</code> - a method to get the list of languages added to the viewer.</li>
<li><code>DjVu.Viewer.Events</code> - an object containing events which are fired by the viewer (see further examples):<ul>
<li><code>PAGE_NUMBER_CHANGED</code> - fired when the number of a currently opened page is changed. The event handler receives no arguments.</li>
</ul>
</li>
</ul>
<h2>More examples</h2><p>If you want to load file, select the page number and keep track of what page is currently open, you can do the following:</p>
<pre><code class="language-js">async function loadDocument {
    const viewer = new DjVu.Viewer();
    viewer.render(document.getElementById(&#39;for_viewer&#39;));
    await viewer.loadDocumentByUrl(&#39;assets/my-djvu-file.djvu&#39;);

    viewer.configure({ // you also can pass the same object as a second parameter to .loadDocumentByUrl()
        pageNumber: 10,
    });

    viewer.on(Djvu.Viewer.Events.PAGE_NUMBER_CHANGED, () =&gt; { // no args are passed here
        console.log(&#39;Page number changed to&#39;, viewer.getPageNumber());
    })
}</code></pre>
<p>Also you can load the file by your own (as an <code>ArrayBuffer</code>) and then use the <code>loadDocument</code> method. However, in case of the <code>loadDocumentByUrl</code> you will see the progress bar of loading, if your file is rather big.</p>
<p>You can create several links to djvu files and open them in the viewer, when a user clicks on them. Here is the complete example:</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;

&lt;header&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;script id=&quot;djvu_js_lib&quot; src=&quot;djvu.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;djvu_viewer.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;reloader.js&quot;&gt;&lt;/script&gt;

    &lt;script&gt;
        window.onload = function() {
            // save as a global value
            window.ViewerInstance = new DjVu.Viewer();
            // render into the element
            window.ViewerInstance.render(
                document.querySelector(&quot;#for_viewer&quot;)
            );

            // get all special links
            document.querySelectorAll(&#39;a.djvu&#39;).forEach(link =&gt; {
                link.addEventListener(&#39;click&#39;, e =&gt; {
                    // we don&#39;t want to download the file
                    e.preventDefault();
                    // open the file in the viewer by its url
                    ViewerInstance.loadDocumentByUrl(link.href);
                });
            });
        };
    &lt;/script&gt;

    &lt;style&gt;
        /* make it pretty-looking */

        body {
            height: 100vh;
            margin: 0;
        }

        #for_viewer {
            height: 80vh;
            width: 90vw;
            margin: 5vh auto;
            border: 1px solid black;
        }

        a.djvu {
            display: inline-block;
            margin: 2vh 2vw;
            border: 1px solid gray;
            text-decoration: none;
            color: inherit;
            padding: 1vh 1vw;
            border-radius: 0.5em;
        }

        a.djvu:hover {
            background: lightgray;
        }
    &lt;/style&gt;

&lt;/header&gt;

&lt;body&gt;
    &lt;a href=&quot;DjVu3Spec.djvu&quot; class=&quot;djvu&quot;&gt;Open DjVu3Spec.djvu&lt;/a&gt;
    &lt;a href=&quot;colorbook.djvu&quot; class=&quot;djvu&quot;&gt;Open colorbook.djvu&lt;/a&gt;
    &lt;div id=&quot;for_viewer&quot;&gt;&lt;/div&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<p>The same technique is used on the main page of this website. You can open both <code>DjVu3Spec.djvu</code> and <code>colorbook.djvu</code> in the viewer on the main page, then save them through the viewer (Ctrl+S) and run the example posted above. Note that you have to run a local server to make everything work. </p></div><footer>DjVu.js 2016 - <script>document.write(new Date().getFullYear())</script> | Perhaps, all rights reserved.  </footer></body></html>